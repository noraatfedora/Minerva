# Create a file called email_password with your email password in it for development.

import yagmail
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
import sys
from os import environ

password = environ['EMAIL_PASSWORD']
sender_email = environ['EMAIL_SENDER']
yag = yagmail.SMTP(sender_email, password)

def send_email(subject, contents, to):
	yag.send(to = to, subject= subject, contents = [contents])

def send_request_confirmation(reciever_email, items, date):
	html = """\
	<html>
		<body>
			<p>You have requested the following items from Minerva:
			<ul>
	"""
	for item in items.keys():
			if (int(items[item]) > 0):
					html += "<li>" + items[item] + " orders of " + item + "</li>"
	html += "</ul> A volunteer should arrive on " + date + ". If you have any questions, respond to this email. </p> </body> </html>"
	send_email(to = reciever_email, contents = html, subject = "Your Minerva Order confirmation")

def send_recieved_notification(reciever_email):
	html = """
		<html>
			<body>
				<p> Your Minerva order has arrived. If you have any questions, respond to this email.</p>
			</body>
		</html>
	"""
	send_email(to = reciever_email, contents = html, subject = "Your Minerva order is here")
